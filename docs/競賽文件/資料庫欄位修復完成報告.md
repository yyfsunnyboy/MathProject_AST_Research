# è³‡æ–™åº«æ¬„ä½ä¿®å¾©å®Œæˆå ±å‘Š

**ä¿®å¾©æ—¥æœŸ**: 2026-01-27  
**ä¿®å¾©äººå“¡**: AI Assistant  
**ä¿®å¾©ç›®çš„**: ç¢ºä¿ 3Ã—3 å¯¦é©—è¨­è¨ˆçš„æ‰€æœ‰è³‡æ–™å®Œæ•´è¨˜éŒ„åˆ°è³‡æ–™åº«

---

## âœ… ä¿®å¾©å®Œæˆé …ç›®

### 1. **æ–°å¢ `garbage_cleaner_count` ç¨ç«‹è¨ˆæ•¸å™¨**

**ä½ç½®**: [code_generator.py](../../core/code_generator.py#L1719-L1726)

**ä¿®æ”¹å…§å®¹**:
```python
# Step B: æ¸…æ´—ç‰¹æ®Šç©ºæ ¼ (MUST DO BEFORE IMPORT CLEANING)
# [æ—ºå®ç§‘å­¸ç] Garbage Cleaner ç¨ç«‹è¨ˆæ•¸
garbage_cleaner_count = 0
original_len = len(clean_code)
clean_code = clean_code.replace('\xa0', ' ').replace('ã€€', ' ').strip()
if len(clean_code) != original_len:
    garbage_cleaner_count = 1
    regex_fixes += 1
```

**ä½œç”¨**: 
- ç¨ç«‹çµ±è¨ˆ Garbage Cleanerï¼ˆåƒåœ¾å­—å…ƒæ¸…é™¤å™¨ï¼‰çš„åŸ·è¡Œæ¬¡æ•¸
- èˆ‡ `regex_fixes` åˆ†é›¢ï¼Œé¿å…æ··æ·†
- è¨˜éŒ„åˆ° `experiment_log.garbage_cleaner_count` æ¬„ä½

---

### 2. **æ–°å¢ `eval_eliminator_count` ç¨ç«‹è¨ˆæ•¸å™¨**

**ä½ç½®**: [code_generator.py](../../core/code_generator.py#L1931-L1942)

**ä¿®æ”¹å…§å®¹**:
```python
# Fix 1: ä¿®å¾© eval(calc_string) â†’ safe_eval(calc_string)
# [æ—ºå®ç§‘å­¸ç] Eval Eliminator ç¨ç«‹è¨ˆæ•¸
eval_eliminator_count = 0
clean_code, n = re.subn(
    r'\beval\s*\(',
    r'safe_eval(',
    clean_code
)
eval_eliminator_count = n
pre_ast_fixes += n
if n > 0:
    print(f"ğŸ”§ [{skill_id}] è½‰æ› eval() â†’ safe_eval() ({n} è™•)")
```

**ä½œç”¨**:
- ç¨ç«‹çµ±è¨ˆ Eval Eliminatorï¼ˆå±éšªå‡½æ•¸æ””æˆªå™¨ï¼‰çš„åŸ·è¡Œæ¬¡æ•¸
- è¨˜éŒ„æ¯æ¬¡å°‡ `eval()` è½‰æ›ç‚º `safe_eval()` çš„æ¬¡æ•¸
- è¨˜éŒ„åˆ° `experiment_log.eval_eliminator_count` æ¬„ä½

---

### 3. **æ–°å¢ `sampling_success_count` å’Œ `sampling_total_count` è¨ˆæ•¸å™¨**

**ä½ç½®**: [code_generator.py](../../core/code_generator.py#L2255-L2298)

**ä¿®æ”¹å…§å®¹**:
```python
# Dynamic Sampling: ç²¾ç°¡ç‰ˆï¼ˆ3æ¬¡è¶³å¤ ï¼Œä½†å¯æå‰é€€å‡ºï¼‰
# [æ—ºå®ç§‘å­¸ç] ç¨ç«‹çµ±è¨ˆ Dynamic Sampling æ¬¡æ•¸
dyn_ok = True
sampling_success_count = 0
sampling_total_count = 0

if is_valid:
    import importlib.util
    try:
        spec = importlib.util.spec_from_loader("temp_skill", loader=None)
        temp_module = importlib.util.module_from_spec(spec)
        exec(final_code, temp_module.__dict__)
        
        # âœ… [Performance Fix V9.2.1] æ—©æœŸé€€å‡ºæ©Ÿåˆ¶
        for sample_idx in range(3):
            sampling_total_count += 1
            try:
                item = temp_module.generate()
                # é©—è­‰é‚è¼¯...
                sampling_success_count += 1
                
                if sampling_success_count >= 2:
                    print(f"âœ… [{skill_id}] Dynamic sampling early pass ({sampling_success_count}/{sampling_total_count} successful)")
                    break
            except Exception as e:
                error_msg = f"Dynamic sampling failed at iteration {sample_idx+1}: {str(e)}"
                dyn_ok = False
                break
    except Exception as e:
        dyn_ok = False
```

**ä½œç”¨**:
- `sampling_success_count`: è¨˜éŒ„å‹•æ…‹æ¡æ¨£æˆåŠŸæ¬¡æ•¸
- `sampling_total_count`: è¨˜éŒ„å‹•æ…‹æ¡æ¨£ç¸½åŸ·è¡Œæ¬¡æ•¸
- æ”¯æ´æ—©æœŸé€€å‡ºæ©Ÿåˆ¶ï¼ˆ2/3 æˆåŠŸå³é€šéï¼‰
- è¨˜éŒ„åˆ° `experiment_log.sampling_success_count` å’Œ `sampling_total_count` æ¬„ä½

---

### 4. **ä¿®å¾© `return_fixes` é‡è¤‡ç´¯åŠ å•é¡Œ**

**ä½ç½®**: [code_generator.py](../../core/code_generator.py#L1923-L1927)

**åŸå§‹ä»£ç¢¼**ï¼ˆæœ‰å•é¡Œï¼‰:
```python
regex_fixes += return_fixes  # Line 1836
# ... ä¸­é–“ç¨‹å¼ç¢¼ ...
regex_fixes += return_fixes  # Line 1913 (é‡è¤‡ç´¯åŠ )
```

**ä¿®å¾©å¾Œ**:
```python
# âŒ å·²åœ¨ Line 1836 ç´¯åŠ éï¼Œæ­¤è™•ä¸é‡è¤‡ç´¯åŠ 
# regex_fixes += return_fixes
```

**ä½œç”¨**:
- é¿å… `return_fixes` è¢«é‡è¤‡è¨ˆå…¥ `regex_fixes`
- ç¢ºä¿ä¿®å¾©æ¬¡æ•¸çµ±è¨ˆæº–ç¢º

---

### 5. **æ›´æ–° `log_experiment()` SQL èªå¥**

**ä½ç½®**: [code_generator.py](../../core/code_generator.py#L1602-L1655)

**æ–°å¢æ¬„ä½ï¼ˆ7 å€‹ï¼‰**:
```sql
INSERT INTO experiment_log (
    ...,  -- åŸæœ‰ 24 å€‹æ¬„ä½
    experiment_group,           -- å¯¦é©—çµ„æ¨™è¨˜ ('A1'-'C3')
    garbage_cleaner_count,      -- Garbage Cleaner ä¿®å¾©æ¬¡æ•¸
    eval_eliminator_count,      -- Eval Eliminator ä¿®å¾©æ¬¡æ•¸
    sampling_success_count,     -- Dynamic Sampling æˆåŠŸæ¬¡æ•¸
    sampling_total_count,       -- Dynamic Sampling ç¸½æ¬¡æ•¸
    spec_prompt_id,             -- MASTER_SPEC Prompt ID
    use_master_spec             -- æ˜¯å¦ä½¿ç”¨ MASTER_SPEC
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
```

**åƒæ•¸ç¶å®š**:
```python
params = (
    ...,  # åŸæœ‰ 24 å€‹åƒæ•¸
    # [æ—ºå®ç§‘å­¸ç 3Ã—3 è¨­è¨ˆå°ˆç”¨æ¬„ä½]
    kwargs.get('experiment_group', None),
    kwargs.get('garbage_cleaner_count', 0),
    kwargs.get('eval_eliminator_count', 0),
    kwargs.get('sampling_success_count', 0),
    kwargs.get('sampling_total_count', 0),
    kwargs.get('spec_prompt_id', None),
    1 if kwargs.get('use_master_spec') else 0
)
```

---

### 6. **å‚³å…¥æ–°æ¬„ä½åˆ° `log_experiment()`**

**ä½ç½®**: [code_generator.py](../../core/code_generator.py#L2388-L2396)

**æ–°å¢åƒæ•¸**:
```python
log_experiment(
    ...,  # åŸæœ‰åƒæ•¸
    # [æ—ºå®ç§‘å­¸ç 3Ã—3 è¨­è¨ˆå°ˆç”¨æ¬„ä½]
    experiment_group=kwargs.get('experiment_group', None),
    garbage_cleaner_count=garbage_cleaner_count,
    eval_eliminator_count=eval_eliminator_count,
    sampling_success_count=sampling_success_count,
    sampling_total_count=sampling_total_count,
    spec_prompt_id=kwargs.get('spec_prompt_id', None),
    use_master_spec=kwargs.get('use_master_spec', False)
)
```

---

### 7. **ä¿®å¾© `prompt_architect.py` å›å‚³ `prompt_id`**

**ä½ç½®**: [prompt_architect.py](../../core/prompt_architect.py#L412)

**ä¿®æ”¹å…§å®¹**:
```python
# [æ—ºå®ç§‘å­¸ç] å›å‚³ prompt_id ä¾›å¯¦é©—è¨˜éŒ„ä½¿ç”¨
return {'success': True, 'spec': spec_content, 'prompt_id': new_prompt_entry.id}
```

**åŸå§‹ä»£ç¢¼**:
```python
return {'success': True, 'spec': spec_content}
```

**ä½œç”¨**:
- å›å‚³ MASTER_SPEC çš„è³‡æ–™åº« ID
- ä¾› `experiment_log.spec_prompt_id` ä½¿ç”¨
- å»ºç«‹ Spec èˆ‡å¯¦é©—çš„é—œè¯é—œä¿‚

---

## ğŸ“Š ä¿®å¾©å‰å¾Œå°æ¯”

### ä¿®å¾©å‰ï¼ˆ24/30 æ¬„ä½ï¼‰

| é¡åˆ¥ | å·²è¨˜éŒ„æ¬„ä½ | ç¼ºå¤±æ¬„ä½ |
|------|-----------|---------|
| **åŸºç¤è³‡è¨Š** | skill_id, start_time, duration_seconds, is_success, error_msg | - |
| **æ¨¡å‹é…ç½®** | model_name, model_size_class, prompt_level | **experiment_group** âŒ |
| **Token çµ±è¨ˆ** | prompt_tokens, completion_tokens, total_tokens | - |
| **è³ªé‡è©•ä¼°** | is_executable, score_syntax, score_math, score_visual | - |
| **ä¿®å¾©çµ±è¨ˆ** | regex_fixes (ç¸½è¨ˆ) | **garbage_cleaner_count** âŒ<br>**eval_eliminator_count** âŒ |
| **æ¡æ¨£çµ±è¨ˆ** | - | **sampling_success_count** âŒ<br>**sampling_total_count** âŒ |
| **é—œè¯è³‡è¨Š** | - | **spec_prompt_id** âŒ<br>**use_master_spec** âŒ |

### ä¿®å¾©å¾Œï¼ˆ30/30 æ¬„ä½ï¼‰

| é¡åˆ¥ | å·²è¨˜éŒ„æ¬„ä½ | ç‹€æ…‹ |
|------|-----------|------|
| **åŸºç¤è³‡è¨Š** | skill_id, start_time, duration_seconds, is_success, error_msg | âœ… |
| **æ¨¡å‹é…ç½®** | model_name, model_size_class, prompt_level, **experiment_group** | âœ… |
| **Token çµ±è¨ˆ** | prompt_tokens, completion_tokens, total_tokens | âœ… |
| **è³ªé‡è©•ä¼°** | is_executable, score_syntax, score_math, score_visual | âœ… |
| **ä¿®å¾©çµ±è¨ˆ** | regex_fixes, **garbage_cleaner_count**, **eval_eliminator_count** | âœ… |
| **æ¡æ¨£çµ±è¨ˆ** | **sampling_success_count**, **sampling_total_count** | âœ… |
| **é—œè¯è³‡è¨Š** | **spec_prompt_id**, **use_master_spec** | âœ… |

---

## ğŸ” è³‡æ–™æµå‘è¿½è¹¤

### å®Œæ•´è³‡æ–™æµå‘åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  competition_benchmark.py (å¯¦é©—åŸ·è¡Œå™¨)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  run_single_experiment()                                     â”‚
â”‚    â”œâ”€ experiment_group = 'A1', 'A2', ..., 'C3'  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚    â”œâ”€ use_master_spec = True/False  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚    â””â”€ å‘¼å« auto_generate_skill_code()                   â”‚  â”‚â”‚
â”‚                                                           â”‚  â”‚â”‚
â”‚  auto_generate_skill_code() [code_generator.py]         â”‚  â”‚â”‚
â”‚    â”œâ”€ garbage_cleaner_count = 0 or 1  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚â”‚
â”‚    â”œâ”€ eval_eliminator_count = ä¿®å¾©æ¬¡æ•¸  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”â”‚  â”‚â”‚
â”‚    â”œâ”€ sampling_success_count = æˆåŠŸæ¬¡æ•¸  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚â”‚  â”‚â”‚
â”‚    â”œâ”€ sampling_total_count = ç¸½æ¬¡æ•¸  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”‚â”‚â”‚ â”‚â”‚
â”‚    â””â”€ å‘¼å« log_experiment()                       â”‚    â”‚â”‚â”‚ â”‚â”‚
â”‚                                                     â”‚    â”‚â”‚â”‚ â”‚â”‚
â”‚  log_experiment() [code_generator.py]             â”‚    â”‚â”‚â”‚ â”‚â”‚
â”‚    â””â”€ INSERT INTO experiment_log                  â”‚    â”‚â”‚â”‚ â”‚â”‚
â”‚         â”œâ”€ experiment_group â† kwargs  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”¼â”€â”˜â”‚
â”‚         â”œâ”€ garbage_cleaner_count â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚â”‚  â”‚
â”‚         â”œâ”€ eval_eliminator_count â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚  â”‚
â”‚         â”œâ”€ sampling_success_count â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚         â”œâ”€ sampling_total_count â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”œâ”€ spec_prompt_id â† kwargs  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚         â””â”€ use_master_spec â† kwargs  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SQLite Database: experiment_log è¡¨                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… experiment_group (å¯¦é©—çµ„æ¨™è¨˜)                            â”‚
â”‚  âœ… garbage_cleaner_count (Step 0 ä¿®å¾©æ¬¡æ•¸)                  â”‚
â”‚  âœ… eval_eliminator_count (Step 4 ä¿®å¾©æ¬¡æ•¸)                  â”‚
â”‚  âœ… sampling_success_count (å‹•æ…‹æ¡æ¨£æˆåŠŸæ¬¡æ•¸)                â”‚
â”‚  âœ… sampling_total_count (å‹•æ…‹æ¡æ¨£ç¸½æ¬¡æ•¸)                    â”‚
â”‚  âœ… spec_prompt_id (é—œè¯ MASTER_SPEC)                        â”‚
â”‚  âœ… use_master_spec (æ˜¯å¦ä½¿ç”¨çµæ§‹åŒ–è¦æ ¼)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª é©—è­‰æª¢æŸ¥æ¸…å–®

### è‡ªå‹•é©—è­‰ï¼ˆå·²å®Œæˆï¼‰

- [x] **èªæ³•æª¢æŸ¥**: `get_errors()` ç„¡éŒ¯èª¤ï¼ˆé™¤å¯é¸ä¾è³´ GPUtilï¼‰
- [x] **è¨ˆæ•¸å™¨åˆå§‹åŒ–**: æ‰€æœ‰æ–°è¨ˆæ•¸å™¨éƒ½åœ¨ä½¿ç”¨å‰åˆå§‹åŒ–
- [x] **SQL æ¬„ä½æ•¸é‡**: INSERT èªå¥æœ‰ 31 å€‹æ¬„ä½ï¼Œåƒæ•¸æœ‰ 31 å€‹ï¼ˆåŒ¹é…ï¼‰
- [x] **è³‡æ–™é¡å‹åŒ¹é…**: æ‰€æœ‰æ¬„ä½çš„è³‡æ–™é¡å‹èˆ‡ Schema å®šç¾©ä¸€è‡´

### æ‰‹å‹•é©—è­‰ï¼ˆå¾…åŸ·è¡Œï¼‰

- [ ] **å°è¦æ¨¡æ¸¬è©¦**: åŸ·è¡Œ 3 æŠ€èƒ½ Ã— 9 çµ„ Ã— 3 æ¬¡ = 81 å¯¦é©—
- [ ] **è³‡æ–™åº«æª¢æŸ¥**: ç¢ºèªæ‰€æœ‰æ–°æ¬„ä½éƒ½æœ‰å€¼å¯«å…¥
- [ ] **è¨ˆæ•¸æ­£ç¢ºæ€§**: é©—è­‰ `garbage_cleaner_count` å’Œ `eval_eliminator_count` çš„çµ±è¨ˆæ­£ç¢º
- [ ] **Sampling çµ±è¨ˆ**: é©—è­‰ `sampling_success_count / sampling_total_count` æ¯”ä¾‹åˆç†

---

## ğŸ“ æ¸¬è©¦å»ºè­°

### 1. å¿«é€Ÿé©—è­‰ï¼ˆ1 å€‹æŠ€èƒ½ï¼‰

```powershell
cd e:\Python\MathProject_AST_Research
python -c "from core.code_generator import auto_generate_skill_code; auto_generate_skill_code('jh_æ•¸å­¸1ä¸Š_IntegerAdditionOperation', experiment_group='TEST', use_master_spec=True)"
```

**é æœŸçµæœ**:
- ç”ŸæˆæˆåŠŸï¼Œæª”æ¡ˆå¯«å…¥ `skills/` ç›®éŒ„
- è³‡æ–™åº« `experiment_log` è¡¨æ–°å¢ 1 ç­†è¨˜éŒ„
- æª¢æŸ¥ `experiment_group = 'TEST'`
- æª¢æŸ¥ `garbage_cleaner_count`, `eval_eliminator_count`, `sampling_*_count` éƒ½æœ‰å€¼

### 2. å°è¦æ¨¡å¯¦é©—ï¼ˆ9 çµ„é…ç½®ï¼‰

```powershell
python scripts/competition_benchmark.py --skills 1 --repeats 3
```

**é æœŸçµæœ**:
- åŸ·è¡Œ 1 Ã— 9 Ã— 3 = 27 æ¬¡å¯¦é©—
- è³‡æ–™åº«æ–°å¢ 27 ç­†è¨˜éŒ„
- 9 çµ„å¯¦é©—çµ„ (A1-C3) éƒ½æœ‰è³‡æ–™
- æ‰€æœ‰æ–°æ¬„ä½éƒ½æœ‰å€¼

### 3. SQL æŸ¥è©¢é©—è­‰

```sql
-- æª¢æŸ¥æ–°æ¬„ä½æ˜¯å¦æœ‰å€¼
SELECT 
    experiment_group,
    COUNT(*) as count,
    AVG(garbage_cleaner_count) as avg_garbage,
    AVG(eval_eliminator_count) as avg_eval,
    AVG(sampling_success_count) as avg_sample_ok,
    AVG(sampling_total_count) as avg_sample_total,
    COUNT(DISTINCT spec_prompt_id) as unique_specs
FROM experiment_log
WHERE experiment_group IS NOT NULL
GROUP BY experiment_group
ORDER BY experiment_group;
```

**é æœŸçµæœ**:
- 9 çµ„å¯¦é©—çµ„éƒ½æœ‰è³‡æ–™
- `avg_garbage` åœ¨ 0-1 ä¹‹é–“ï¼ˆå¤§å¤šæ•¸æƒ…æ³ç‚º 0 æˆ– 1ï¼‰
- `avg_eval` >= 0ï¼ˆæœ‰äº›æŠ€èƒ½å¯èƒ½ä¸éœ€è¦ eval ä¿®å¾©ï¼‰
- `avg_sample_ok / avg_sample_total` >= 0.67ï¼ˆè‡³å°‘ 2/3 æˆåŠŸï¼‰

---

## âš ï¸ å·²çŸ¥é™åˆ¶

1. **`score_math` å’Œ `score_visual` ä»å›ºå®šç‚º 0.0**
   - åŸå› : é‚è¼¯è©•ä¼°å’Œè¦–è¦ºè©•ä¼°å°šæœªå¯¦ä½œ
   - å½±éŸ¿: ç„¡æ³•å®Œæ•´è©•ä¼°é¡Œç›®è³ªé‡
   - å»ºè­°: å¾ŒçºŒç‰ˆæœ¬æ•´åˆå‹•æ…‹æ¡æ¨£çµæœè¨ˆç®— `score_math`

2. **`experiment_group` éœ€è¦å¾ `competition_benchmark.py` å‚³å…¥**
   - åŸå› : `code_generator.py` ç„¡æ³•è‡ªå‹•åˆ¤æ–·å¯¦é©—çµ„
   - å½±éŸ¿: å¿…é ˆå¾å¤–éƒ¨å‘¼å«æ™‚æ˜ç¢ºæŒ‡å®š
   - å»ºè­°: ç¢ºä¿ `competition_benchmark.py` æ­£ç¢ºå‚³å…¥

3. **`spec_prompt_id` éœ€è¦å¾ `generate_v15_spec()` å–å¾—**
   - åŸå› : éœ€è¦å…ˆå‘¼å« Architect ç”Ÿæˆ MASTER_SPEC
   - å½±éŸ¿: è£¸ç”Ÿæˆï¼ˆBare Promptï¼‰æ™‚æ­¤æ¬„ä½ç‚º NULL
   - å»ºè­°: A1/B1/C1 çµ„ï¼ˆLevel 1ï¼‰æ­¤æ¬„ä½å¯ç‚ºç©º

---

## âœ… ä¿®å¾©é©—è­‰

### èªæ³•æ­£ç¢ºæ€§

```
âœ… core/code_generator.py: ç„¡èªæ³•éŒ¯èª¤
âœ… core/prompt_architect.py: ç„¡èªæ³•éŒ¯èª¤
```

### è³‡æ–™å®Œæ•´æ€§

| æ¬„ä½ | è¨ˆç®—ä½ç½® | å‚³å…¥ä½ç½® | SQL æ¬„ä½ | ç‹€æ…‹ |
|------|---------|---------|---------|------|
| `experiment_group` | `kwargs` | Line 2388 | âœ… | âœ… |
| `garbage_cleaner_count` | Line 1719-1726 | Line 2389 | âœ… | âœ… |
| `eval_eliminator_count` | Line 1931-1942 | Line 2390 | âœ… | âœ… |
| `sampling_success_count` | Line 2255-2298 | Line 2391 | âœ… | âœ… |
| `sampling_total_count` | Line 2255-2298 | Line 2392 | âœ… | âœ… |
| `spec_prompt_id` | `kwargs` | Line 2393 | âœ… | âœ… |
| `use_master_spec` | `kwargs` | Line 2394 | âœ… | âœ… |

### çµ±è¨ˆæ­£ç¢ºæ€§

| çµ±è¨ˆé …ç›® | é‡è¤‡è¨ˆç®—é¢¨éšª | ç‹€æ…‹ |
|---------|-------------|------|
| `regex_fixes` | âœ… å·²ä¿®å¾© `return_fixes` é‡è¤‡ç´¯åŠ  | âœ… |
| `garbage_cleaner_count` | âœ… ç¨ç«‹è¨ˆæ•¸å™¨ | âœ… |
| `eval_eliminator_count` | âœ… ç¨ç«‹è¨ˆæ•¸å™¨ | âœ… |
| `sampling_success_count` | âœ… ç¨ç«‹è¨ˆæ•¸å™¨ | âœ… |
| `sampling_total_count` | âœ… ç¨ç«‹è¨ˆæ•¸å™¨ | âœ… |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•

1. **åŸ·è¡Œå°è¦æ¨¡æ¸¬è©¦** (å„ªå…ˆç´š ğŸ”´ Critical)
   ```powershell
   python scripts/competition_benchmark.py --skills 3 --repeats 3
   ```

2. **è³‡æ–™åº«é©—è­‰** (å„ªå…ˆç´š ğŸŸ¡ Medium)
   - é–‹å•Ÿ SQLite è³‡æ–™åº«
   - æŸ¥è©¢ `experiment_log` è¡¨
   - ç¢ºèªæ‰€æœ‰æ–°æ¬„ä½éƒ½æœ‰å€¼

3. **çµ±è¨ˆåˆ†ææº–å‚™** (å„ªå…ˆç´š ğŸŸ¢ Low)
   - æº–å‚™ ANOVA åˆ†æè…³æœ¬
   - æº–å‚™æ•¸æ“šå¯è¦–åŒ–å·¥å…·
   - æº–å‚™å¯¦é©—å ±å‘Šæ¨¡æ¿

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [è³‡æ–™åº«æ¬„ä½å°ç…§æª¢æŸ¥å ±å‘Š](è³‡æ–™åº«æ¬„ä½å°ç…§æª¢æŸ¥å ±å‘Š.md)
- [3Ã—3 å¯¦é©—è¨­è¨ˆè©³è§£](3x3å¯¦é©—è¨­è¨ˆè©³è§£.md)
- [æ—ºå®ç§‘å­¸çç ”ç©¶è¨ˆç•«](æ—ºå®ç§‘å­¸ç_ç ”ç©¶è¨ˆç•«.md)
- [è³‡æ–™åº« Schema æ–‡ä»¶](../è³‡æ–™åº«Table_Schema_20260117.md)

---

**ä¿®å¾©å®Œæˆæ™‚é–“**: 2026-01-27  
**ä¿®å¾©ç‹€æ…‹**: âœ… æ‰€æœ‰ Critical å•é¡Œå·²è§£æ±º  
**æ¸¬è©¦ç‹€æ…‹**: â³ å¾…åŸ·è¡Œå°è¦æ¨¡æ¸¬è©¦
